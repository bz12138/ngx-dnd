!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@swimlane/dragula")):"function"==typeof define&&define.amd?define("@swimlane/ngx-dnd",["exports","@angular/core","@angular/common","@swimlane/dragula"],t):t(((e=e||self).swimlane=e.swimlane||{},e.swimlane["ngx-dnd"]={}),e.ng.core,e.ng.common,e.dragulaNamespace)}(this,function(e,t,n,o){"use strict";function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(p){r={error:p}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a}function i(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}var a=o,p=function(){function e(){this.droppableMap=new WeakMap,this.draggableMap=new WeakMap,this.dragulaOptions=this.createDrakeOptions(),this.drake=a([],this.dragulaOptions),this.registerEvents()}return e.prototype.register=function(e){this.droppableMap.set(e.container,e),this.drake.containers.push(e.container)},e.prototype.remove=function(e){this.droppableMap["delete"](e.container);var t=this.drake.containers.indexOf(e.container);t>-1&&this.drake.containers.splice(t,1)},e.prototype.registerDraggable=function(e){this.draggableMap.set(e.element,e)},e.prototype.removeDraggable=function(e){this.draggableMap["delete"](e.element)},e.prototype.createDrakeOptions=function(){var e=this;return{accepts:function(t,n){if(t.contains(n))return!1;var o=e.draggableMap.get(t),r=e.droppableMap.get(n);return!o||!r||o.dropZones.includes(r.dropZone)},copy:function(t,n){var o=e.droppableMap.get(n);return!!o&&o.copy},moves:function(t,n,o,r){var i=e.draggableMap.get(t);return!i||i.moves(n,o,r)},revertOnSpill:!0,direction:function(t,n,o){return e.droppableMap.get(n).direction||"vertical"}}},e.prototype.registerEvents=function(){var e,t,n=this;this.drake.on("drag",function(o,r){if(t=undefined,e=o,o&&r){if(n.draggableMap.has(o)){var i=n.draggableMap.get(o);t=i.model,i.drag.emit({type:"drag",el:o,source:r,value:t})}if(n.droppableMap.has(r)){var a=n.droppableMap.get(r);n.dragulaOptions.removeOnSpill=a.removeOnSpill,a.drag.emit({type:"drag",el:o,source:r,sourceComponent:a,value:t})}}}),this.drake.on("drop",function(o,r,i){var a=n.droppableMap.get(r);if(a){var p=t,s=Array.prototype.indexOf.call(r.children,o);if(s<0)n.drake.cancel(!0);else{var l=n.droppableMap.get(i);if(l){var d=l.model,c=a.model,u=!(!d||!t),g=u?d.indexOf(t):-1;if(u&&g<0)return void n.drake.cancel(!0);if(c){var m=!d||e!==o;g>-1&&d&&r===i?d.splice(s,0,d.splice(g,1)[0]):(o.parentNode===r&&r.removeChild(o),m?p=JSON.parse(JSON.stringify(p)):(o.parentNode!==i&&n.drake.cancel(!0),d.splice(g,1)),c.splice(s,0,p))}}a.drop.emit({type:"drop",el:o,source:i,value:p,dropIndex:s})}}}),this.drake.on("remove",function(e,o,r){if(n.droppableMap.has(r)){var i=n.droppableMap.get(r),a=i.model,p=t&&a?a.indexOf(t):-1;p>-1&&(e.parentNode!==r&&r.appendChild(e),a.splice(p,1)),i.remove.emit({type:"remove",el:e,container:o,source:r,value:t})}}),this.drake.on("cancel",function(e,o,r){n.droppableMap.has(o)&&n.droppableMap.get(o).cancel.emit({type:"cancel",el:e,container:o,source:r,value:t})}),this.drake.on("over",function(e,o,r){n.droppableMap.has(o)&&n.droppableMap.get(o).over.emit({type:"over",el:e,container:o,source:r,value:t})}),this.drake.on("out",function(e,o,r){n.droppableMap.has(o)&&n.droppableMap.get(o).out.emit({type:"out",el:e,container:o,source:r,value:t})})},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),s=1e4;var l=function(){function e(e,n,o){this.el=e,this.renderer=n,this.drakesService=o,this.copy=!1,this.removeOnSpill=!1,this.direction="vertical",this.drop=new t.EventEmitter,this.drag=new t.EventEmitter,this.over=new t.EventEmitter,this.out=new t.EventEmitter,this.remove=new t.EventEmitter,this.cancel=new t.EventEmitter}return Object.defineProperty(e.prototype,"container",{get:function(){return this.el.nativeElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropZone",{get:function(){return this._dropZone||this.ngxDroppable||this.defaultZone},set:function(e){this._dropZone=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.defaultZone="@@DefaultDropZone-"+s+++"@@",this.drakesService.register(this)},e.prototype.ngAfterViewInit=function(){var e=this;this.over.subscribe(function(){e.renderer.addClass(e.container,"gu-over")}),this.out.subscribe(function(){e.renderer.removeClass(e.container,"gu-over")})},e.prototype.ngOnDestroy=function(){this.drakesService.remove(this)},e.decorators=[{type:t.Directive,args:[{selector:"[ngxDroppable]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:p}]},e.propDecorators={model:[{type:t.Input}],copy:[{type:t.Input}],removeOnSpill:[{type:t.Input}],ngxDroppable:[{type:t.Input}],direction:[{type:t.Input}],drop:[{type:t.Output}],drag:[{type:t.Output}],over:[{type:t.Output}],out:[{type:t.Output}],remove:[{type:t.Output}],cancel:[{type:t.Output}],dropZone:[{type:t.Input}]},e}(),d=function(){function e(e,n,o){this.el=e,this.drakesService=n,this.droppableDirective=o,this._moves=!0,this.handles=[],this.drag=new t.EventEmitter,this.dragDelay=200,this.dragDelayed=!0}return Object.defineProperty(e.prototype,"dropZones",{get:function(){return this._dropZones||this.ngxDraggable||this._parentDropzones},set:function(e){this._dropZones=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasHandle",{get:function(){return!!this.handles.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.el.nativeElement},enumerable:!0,configurable:!0}),e.prototype.onMove=function(e){this._moves&&!this.dragDelayed||(e.stopPropagation(),clearTimeout(this.touchTimeout))},e.prototype.onDown=function(){var e=this;this._moves&&(this.touchTimeout=setTimeout(function(){e.dragDelayed=!1},this.dragDelay))},e.prototype.onUp=function(){this._moves&&(clearTimeout(this.touchTimeout),this.dragDelayed=!0)},e.prototype.ngOnInit=function(){this.update()},e.prototype.update=function(){this._parentDropzones=[this.droppableDirective.dropZone],this.drakesService.registerDraggable(this),this.updateElements()},e.prototype.ngOnDestroy=function(){this.drakesService.removeDraggable(this)},e.prototype.updateElements=function(){var e=this.el.nativeElement,t=e.querySelectorAll("[ngxdraghandle]");this.handles=Array.from(t).filter(function(t){return function(e){for(;e.parentNode;)if((e=e.parentNode).hasAttribute&&e.hasAttribute("ngxdraggable"))return e}(t)===e})},e.prototype.canMove=function(e,t,n){return"boolean"==typeof this._moves?this._moves:"function"!=typeof this._moves||this._moves(this.model,e,t,n)},e.prototype.moves=function(e,t,n){return!!this.canMove(e,t,n)&&(!this.hasHandle||this.handles.some(function(e){return function(e,t){if(e===t)return!0;for(;(e=e.parentNode)&&e!==t;);return!!e}(t,e)}))},e.prototype.ngDoCheck=function(){this.updateElements()},e.decorators=[{type:t.Directive,args:[{selector:"[ngxDraggable]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:p},{type:l}]},e.propDecorators={ngxDraggable:[{type:t.Input}],model:[{type:t.Input}],dropZones:[{type:t.Input}],_moves:[{type:t.Input,args:["moves"]}],drag:[{type:t.Output}],onMove:[{type:t.HostListener,args:["touchmove",["$event"]]}],onDown:[{type:t.HostListener,args:["touchstart"]}],onUp:[{type:t.HostListener,args:["touchend"]}]},e}(),c=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"[ngxDragHandle]"}]}],e}(),u=0;var g=function(){function e(){this.copy=!1,this.removeOnSpill=!1,this.dropZone="@@DefaultDropZone-"+u+++"@@",this.drop=new t.EventEmitter,this.drag=new t.EventEmitter,this.over=new t.EventEmitter,this.out=new t.EventEmitter,this.remove=new t.EventEmitter,this.cancel=new t.EventEmitter}return Object.defineProperty(e.prototype,"dropZones",{get:function(){return this._dropZones||this._defaultZones},set:function(e){this._dropZones=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._defaultZones=[this.dropZone]},e.prototype.ngAfterViewInit=function(){var e=this;this.droppable.drag.subscribe(function(t){return e.drag.emit(t)}),this.droppable.drop.subscribe(function(t){return e.drop.emit(t)}),this.droppable.over.subscribe(function(t){return e.over.emit(t)}),this.droppable.out.subscribe(function(t){return e.out.emit(t)}),this.droppable.remove.subscribe(function(t){return e.remove.emit(t)}),this.droppable.cancel.subscribe(function(t){return e.cancel.emit(t)})},e.decorators=[{type:t.Component,args:[{selector:"ngx-dnd-container",template:'<div\n  ngxDroppable\n  [dropZone]="dropZone"\n  [model]="model"\n  [copy]="copy"\n  [ngClass]="{ \'gu-empty\': !model?.length }"\n  [removeOnSpill]="removeOnSpill"\n  class=\'ngx-dnd-container\'>\n  <ng-container *ngIf="model">\n    <ng-container *ngFor="let item of model">\n      <ngx-dnd-item\n        ngxDraggable\n        [model]="item"\n        [dropZone]="dropZone"\n        [dropZones]="dropZones"\n        [copy]="copy"\n        [moves]="moves"\n        [removeOnSpill]="removeOnSpill"\n        [droppableItemClass]="droppableItemClass"\n        [droppableItemStyle]="droppableItemStyle">\n      </ngx-dnd-item>\n    </ng-container>\n  </ng-container>\n  <ng-content *ngIf="!model"></ng-content>\n</div>\n',encapsulation:t.ViewEncapsulation.None,styles:['.ngx-dnd-container{background-color:rgba(255,255,255,.2);border:2px solid red;margin:10px;padding:10px}.ngx-dnd-container.gu-empty{border:2px dotted red}.ngx-dnd-container:nth-child(odd){background-color:rgba(0,0,0,.2)}.ngx-dnd-container .ex-moved{background-color:#e74c3c}.ngx-dnd-container .ex-over{background-color:rgba(255,255,255,.3)}.ngx-dnd-container .handle{padding:0 5px;margin-right:5px;background-color:rgba(0,0,0,.4);cursor:move}.no-select{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.clearfix::after{content:" ";display:block;height:0;clear:both}']}]}],e.propDecorators={model:[{type:t.Input}],copy:[{type:t.Input}],removeOnSpill:[{type:t.Input}],droppableItemClass:[{type:t.Input}],droppableItemStyle:[{type:t.Input}],dropZone:[{type:t.Input}],dropZones:[{type:t.Input}],moves:[{type:t.Input}],template:[{type:t.Input},{type:t.ContentChild,args:[t.TemplateRef,{"static":!0}]}],droppable:[{type:t.Input},{type:t.ViewChild,args:[l,{"static":!0}]}],drop:[{type:t.Output}],drag:[{type:t.Output}],over:[{type:t.Output}],out:[{type:t.Output}],remove:[{type:t.Output}],cancel:[{type:t.Output}]},e}(),m=function(){function e(e,t){this.container=e,this.draggableDirective=t,this._copy=!1,this._removeOnSpill=!1}return Object.defineProperty(e.prototype,"dropZone",{get:function(){return this._dropZone||this.container.dropZone},set:function(e){this._dropZone=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropZones",{get:function(){return this._dropZones||this.container.dropZones},set:function(e){this._dropZones=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"droppableItemClass",{get:function(){return this._droppableItemClass||this.container.droppableItemClass},set:function(e){this._droppableItemClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removeOnSpill",{get:function(){return"boolean"==typeof this._removeOnSpill?this._removeOnSpill:this.container.removeOnSpill},set:function(e){this._removeOnSpill=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copy",{get:function(){return"boolean"==typeof this._copy?this._copy:this.container.copy},set:function(e){this._copy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasHandle",{get:function(){return this.draggableDirective.hasHandle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moveDisabled",{get:function(){return!this.draggableDirective.canMove()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"droppableItemStyle",{get:function(){return this._droppableItemStyle||this.container.droppableItemStyle},set:function(e){this._droppableItemStyle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classString",{get:function(){var e=["ngx-dnd-item",("function"==typeof this.droppableItemClass?this.droppableItemClass(this.model):this.droppableItemClass)||""];return this.moveDisabled&&e.push("move-disabled"),this.hasHandle&&e.push("has-handle"),e.join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return Array.isArray(this.model)?"array":typeof this.model},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.data={model:this.model,type:this.type,dropZone:this.dropZone,template:this.container.template}},e.decorators=[{type:t.Component,args:[{selector:"ngx-dnd-item",template:'<ng-container [ngSwitch]="type">\n\n  <ng-container *ngSwitchCase="\'array\'">\n    <ngx-dnd-container\n      [model]="model"\n      [template]="container.template"\n      [dropZone]="dropZone"\n      [dropZones]="dropZones"\n      [removeOnSpill]="removeOnSpill"\n      [droppableItemClass]="droppableItemClass"\n      [droppableItemStyle]="droppableItemStyle"\n      [copy]="copy">\n    </ngx-dnd-container>\n  </ng-container>\n\n  <ng-container *ngSwitchCase="\'object\'">\n    <ng-template\n      *ngIf="container.template"\n      [ngTemplateOutlet]="container.template"\n      [ngTemplateOutletContext]="data">\n    </ng-template>\n    <ng-container *ngIf="!container.template">\n      <div\n        class="ngx-dnd-content">\n        {{model.label}}\n      </div>\n      <ngx-dnd-container\n        *ngIf="model.children"\n        [model]="model.children"\n        [template]="container.template"\n        [dropZone]="dropZone"\n        [dropZones]="dropZones"\n        [removeOnSpill]="removeOnSpill"\n        [droppableItemClass]="droppableItemClass"\n        [copy]="copy">\n      </ngx-dnd-container>\n    </ng-container>\n  </ng-container>\n\n  <ng-container *ngSwitchCase="\'undefined\'">\n  </ng-container>\n\n  <ng-container *ngSwitchDefault>\n    <ng-template\n      *ngIf="container.template"\n      [ngTemplateOutlet]="container.template"\n      [ngTemplateOutletContext]="data">\n    </ng-template>\n    <div\n      *ngIf="!container.template"\n      class="ngx-dnd-content">\n      {{model}}\n    </div>\n  </ng-container>\n\n</ng-container>\n\n\n\n\n\n\n\n',encapsulation:t.ViewEncapsulation.None,styles:[".ngx-dnd-box,.ngx-dnd-item{margin:10px;padding:10px;background-color:rgba(0,0,0,.2);transition:opacity .4s ease-in-out;border:1px solid #add8e6;display:block}.ngx-dnd-box.has-handle [ngxDragHandle],.ngx-dnd-box.has-handle [ngxdraghandle],.ngx-dnd-box:not(.has-handle):not(.move-disabled),.ngx-dnd-item.has-handle [ngxDragHandle],.ngx-dnd-item.has-handle [ngxdraghandle],.ngx-dnd-item:not(.has-handle):not(.move-disabled){cursor:move;cursor:grab;cursor:-webkit-grab}.ngx-dnd-box .ngx-dnd-content,.ngx-dnd-item .ngx-dnd-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ngx-dnd-box:hover,.ngx-dnd-item:hover{border:1px solid #00f}.ngx-dnd-box{height:40px;width:40px;line-height:20px;text-align:center;float:left}.gu-mirror{position:fixed!important;margin:0!important;z-index:9999!important;opacity:.8}.gu-hide{display:none!important}.gu-unselectable{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important}.gu-transit{opacity:.2}"]}]}],e.ctorParameters=function(){return[{type:g},{type:d}]},e.propDecorators={model:[{type:t.Input}],dropZone:[{type:t.Input}],dropZones:[{type:t.Input}],droppableItemClass:[{type:t.Input}],removeOnSpill:[{type:t.Input}],copy:[{type:t.Input}],droppableItemStyle:[{type:t.HostBinding,args:["style"]},{type:t.Input}],classString:[{type:t.HostBinding,args:["class"]}]},e}(),h=[g,m],f=[d,l,c],y=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[p]}},e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],declarations:i(h,f),exports:i(h,f)}]}],e}();e.ContainerComponent=g,e.DragHandleDirective=c,e.DraggableDirective=d,e.DrakeStoreService=p,e.DroppableDirective=l,e.ItemComponent=m,e.NgxDnDModule=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=swimlane-ngx-dnd.umd.min.js.map